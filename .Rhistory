knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(mgcv)
library(dplyr)
# install.packages("RPostgreSQL") ##Install package if needed
require("RPostgreSQL")
library(stringr)
morphine <- dbGetQuery(con, "select * from Morphine")
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(mgcv)
library(dplyr)
# install.packages("RPostgreSQL") ##Install package if needed
require("RPostgreSQL")
library(stringr)
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(mgcv)
library(dplyr)
# install.packages("RPostgreSQL") ##Install package if needed
require("RPostgreSQL")
library(stringr)
# loads the PostgreSQL driver
drv <- dbDriver("PostgreSQL")
# creates a connection to the postgres database (MIMIC)
# note that "con" will be used later in each connection to the database
con <- dbConnect(drv, dbname = "mimic",
host = "localhost", port = 5432,
user = "postgres", password = "postgres") # password and username were specific to my
# computer, removed here
dbGetQuery(con, "set search_path to mimiciii")
morphine <- dbGetQuery(con, "select * from Morphine")
View(morphine)
morphine <- dbGetQuery(con, "select * from Morphine")
oxycodone <- dbGetQuery(con, "select * from Oxycodone")
write.csv(fentanyl, file = "Fentanyl.csv")
fentanyl <- dbGetQuery(con, "select * from Fentanyl")
#colnames(icu_stay_table) <- c("subject_id", "hadm_id", "icustay_id", "intime", "icu_los")
write.csv(fentanyl, file = "Fentanyl.csv")
write.csv(morphine, file = "Morphine.csv")
write.csv(oxycodone, file = "Oxycodone.csv")
write.csv(percocet, file = "Percocet.csv")
percocet <- dbGetQuery(con, "select * from Percocet")
write.csv(percocet, file = "Percocet.csv")
write.csv(percocet, file = "Hydromorphone.csv")
(con, "select * from Hydromorphone")
hydromorphone <- dbGetQuery(con, "select * from Hydromorphone")
write.csv(percocet, file = "Hydromorphone.csv")
library(readr)
Percocet <- read_csv("~/SSmimic/Medication/Percocet.csv")
View(Percocet)
library(readr)
Fentanyl <- read_csv("~/SSmimic/Medication/Fentanyl.csv")
Hydromorphone <- read_csv("~/SSmimic/Medication/Hydromorphone.csv")
Morphine <- read_csv("~/SSmimic/Medication/Morphine.csv")
Oxycodone <- read_csv("~/SSmimic/Medication/Oxycodone.csv")
Percocet <- read_csv("~/SSmimic/Medication/Percocet.csv")
opioid <- rbind(Fentanyl,Hydromorphone, Morphine, Oxycodone, Percocet)
View(opioid)
Fentanyl %>% distinct(hadm_id, .keep_all = TRUE)
library(dplyr)
Fentanyl %>% distinct(hadm_id, .keep_all = TRUE)
Fentanyl <- read_csv("~/SSmimic/Medication/Fentanyl.csv")
Fentanyl %>% distinct(subject_id, .keep_all = TRUE)
Fentanyl %>% distinct(hadm_id, .keep_all =FALSE)
Fent<- Fentanyl %>% distinct(hadm_id, .keep_all = TRUE)
Fent<- Fentanyl %>% distinct(hadm_id, .keep_all = TRUE)
Hydrom<- Hydromorphone %>% distinct(hadm_id, .keep_all = TRUE)
Morph<- Morphine %>% distinct(hadm_id, .keep_all = TRUE)
Oxycod<- Oxycodone %>% distinct(hadm_id, .keep_all = TRUE)
Perco <- Percocet %>% distinct(hadm_id, .keep_all = TRUE)
opioid <- rbind(Fent,Hydrom, Morph, Oxycod, Perco)
write.csv(opioid, file = "opioid.csv")
