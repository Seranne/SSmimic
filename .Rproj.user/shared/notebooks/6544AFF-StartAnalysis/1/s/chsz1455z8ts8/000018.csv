"0","library(tidyverse)"
"0","library(readr)"
"0","IVopioid <- read_csv(""~/SSmimic/Medication/IVtable_nodup.csv"")"
"2","Missing column names filled in: 'X1' [1]"
"2","Duplicated column names deduplicated: 'X1' => 'X1_1' [2]"
"2","Parsed with column specification:
cols(
  X1 = col_integer(),
  X1_1 = col_integer(),
  subject_id = col_integer(),
  hadm_id = col_integer(),
  startdate = col_date(format = """"),
  enddate = col_date(format = """"),
  drug = col_character(),
  drug_name_generic = col_character(),
  formulary_drug_cd = col_character(),
  form_unit_disp = col_character(),
  route = col_character()
)
"
"0","cohort <- read_csv(""~/SSmimic/Cohort/cohort.csv"")"
"2","Missing column names filled in: 'X1' [1]"
"2","Duplicated column names deduplicated: 'X1' => 'X1_1' [3]"
"2","Parsed with column specification:
cols(
  .default = col_integer(),
  med.pain = col_double(),
  age = col_double(),
  gender = col_character(),
  ethnicity = col_character(),
  intime = col_date(format = """"),
  icu_los = col_double(),
  mean.pain = col_double(),
  mean.GCS = col_double()
)
"
"2","See spec(...) for full column specifications.
"
"0","#merger the tables to ease analysis"
"0","finaltable<- left_join(cohort,IVopioid, ""hadm_id"")"
"0","#Replacing NA to 0 and receiving an IV opioid to 1:"
"0","finaltable$formulary_drug_cd<- ifelse(is.na(finaltable$formulary_drug_cd),0,1)"
"0","#categorize race into 4 categories"
"0","finaltable$ethnicity <- ifelse(grepl(""BLACK"",finaltable$ethnicity),""BLACK"", finaltable$ethnicity)"
"0","finaltable$ethnicity <- ifelse(grepl(""WHITE"",finaltable$ethnicity),""WHITE"", finaltable$ethnicity)"
"0","finaltable$ethnicity <- ifelse(grepl(""HISPANIC"",finaltable$ethnicity),""HISPANIC"", finaltable$ethnicity)"
"0","finaltable$ethnicity <- ifelse(grepl(""ASIAN"",finaltable$ethnicity),""OTHER"", finaltable$ethnicity)"
"0","finaltable$ethnicity <- ifelse(grepl(""UN"",finaltable$ethnicity),""OTHER"", finaltable$ethnicity)"
"0","finaltable$ethnicity <- ifelse(grepl(""MUL"",finaltable$ethnicity),""OTHER"", finaltable$ethnicity)"
"0","finaltable$ethnicity <- ifelse(grepl(""INDIAN"",finaltable$ethnicity),""OTHER"", finaltable$ethnicity)"
"0","finaltable$ethnicity <- ifelse(grepl(""SOUTH"",finaltable$ethnicity),""OTHER"", finaltable$ethnicity)"
"0","finaltable$ethnicity <- ifelse(grepl(""ISLAND"",finaltable$ethnicity),""OTHER"", finaltable$ethnicity)"
"0","finaltable$ethnicity <- ifelse(grepl(""DECL"",finaltable$ethnicity),""OTHER"", finaltable$ethnicity)"
"0","finaltable$ethnicity <- ifelse(grepl(""EAST"",finaltable$ethnicity),""OTHER"", finaltable$ethnicity)"
"0","finaltable$ethnicity <- ifelse(grepl(""PORTU"",finaltable$ethnicity),""HISPANIC"", finaltable$ethnicity)"
"0","finaltable$ethnicity[is.na(finaltable$ethnicity)]<-""OTHER"""
"0","unique(finaltable$ethnicity)"
"1","[1]"
"1"," ""WHITE""   "
"1"," ""HISPANIC"""
"1"," ""OTHER""   "
"1"," ""BLACK""   "
"1","
"
"0","#filter out years 2001 and 2012 as they are incomplete years"
"0","finaltable<- filter(finaltable, !finaltable$admityear == ""2001"" & !finaltable$admityear == ""2012"")"
"0","#write csv final table: cohort plus IV opioids woth no duplicated hadm_id's"
"0","write.csv(finaltable, file = ""finaltable.csv"")"
